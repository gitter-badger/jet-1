# at some point checkc should output to a file not stdout
DIAG=

CFLOPT=-O3 -Wall -Wno-unused-function -Wno-unused-label
CFLDBG=-O0 -g -Werror -DDEBUG
CFLFAST=-O3 -march=native -ffast-math -funroll-loops -DNOSTACKCHECK -DNONULLCHECK -DNOBOUNDSCHECK

%.bin: %.fp *.[ch]
	./comp $< $(DIAG) > $@.c && cc $(CFLOPT) $@.c -o $@
#	rm $@.c

%-d.bin: %.fp *.[ch]
	./comp $< $(DIAG) > $@.c && cc $(CFLDBG) $@.c -o $@
#	rm $@.c

%-f.bin: %.fp *.[ch]
	./comp $< $(DIAG) > $@.c && cc $(CFLFAST) $@.c -o $@
#	rm $@.c
